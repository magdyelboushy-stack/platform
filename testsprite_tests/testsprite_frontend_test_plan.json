[
  {
    "id": "TC001",
    "title": "Successful student registration with valid inputs and file uploads",
    "description": "Verify that a student user can complete multi-step registration with valid required fields and files, and receives a successful registration response.",
    "category": "functional",
    "priority": "High",
    "steps": [
      {
        "type": "action",
        "description": "Navigate to student registration page"
      },
      {
        "type": "action",
        "description": "Fill in valid name, email, password, phone, national ID, and other required fields"
      },
      {
        "type": "action",
        "description": "Upload valid profile photo, national ID document, and student ID image files"
      },
      {
        "type": "action",
        "description": "Submit registration form with correct CSRF token"
      },
      {
        "type": "assertion",
        "description": "Check server returns HTTP 201 with success message and user_id"
      },
      {
        "type": "assertion",
        "description": "Verify email verification link is sent to user email"
      }
    ]
  },
  {
    "id": "TC002",
    "title": "Reject registration with duplicate email",
    "description": "Verify system rejects registration attempt if the submitted email already exists in the system.",
    "category": "error handling",
    "priority": "High",
    "steps": [
      {
        "type": "action",
        "description": "Attempt to register new user with email already registered"
      },
      {
        "type": "action",
        "description": "Submit registration form with valid other fields and CSRF token"
      },
      {
        "type": "assertion",
        "description": "Check server returns HTTP 422 with validation error for duplicate email"
      }
    ]
  },
  {
    "id": "TC003",
    "title": "Reject registration with invalid phone and national ID formats",
    "description": "Verify registration fails if phone or national ID fields do not conform to expected pattern formats.",
    "category": "error handling",
    "priority": "Medium",
    "steps": [
      {
        "type": "action",
        "description": "Fill registration form with phone of invalid pattern (e.g. less/more than 11 digits)"
      },
      {
        "type": "action",
        "description": "Fill national ID field with invalid pattern (not 14 digits)"
      },
      {
        "type": "action",
        "description": "Submit form with valid CSRF token"
      },
      {
        "type": "assertion",
        "description": "Check server response HTTP 422 with validation errors specifying invalid phone and national ID"
      }
    ]
  },
  {
    "id": "TC004",
    "title": "Teacher registration restricted to admin only",
    "description": "Verify that student users cannot register as teachers and teachers can only be created by admin accounts.",
    "category": "security",
    "priority": "High",
    "steps": [
      {
        "type": "action",
        "description": "Attempt registration with role set to teacher using public API"
      },
      {
        "type": "assertion",
        "description": "Check rejection with suitable HTTP status and error message"
      },
      {
        "type": "action",
        "description": "Login as admin and create teacher account via admin interface"
      },
      {
        "type": "assertion",
        "description": "Check teacher user account is created and can login successfully"
      }
    ]
  },
  {
    "id": "TC005",
    "title": "Successful login with valid email and password",
    "description": "Verify user can login with correct email and password, receiving a valid session and CSRF token.",
    "category": "functional",
    "priority": "High",
    "steps": [
      {
        "type": "action",
        "description": "Navigate to login page"
      },
      {
        "type": "action",
        "description": "Input valid registered email and correct password"
      },
      {
        "type": "action",
        "description": "Provide valid CSRF token"
      },
      {
        "type": "action",
        "description": "Submit login form"
      },
      {
        "type": "assertion",
        "description": "Check HTTP 200 response with user data and redirect URL"
      },
      {
        "type": "assertion",
        "description": "Verify session cookie is set with HttpOnly and Secure flags"
      }
    ]
  },
  {
    "id": "TC006",
    "title": "Login failure with incorrect password increments failed attempt count",
    "description": "Verify failed login with incorrect password returns generic error without sensitive info and increments failed login attempts for rate limiting.",
    "category": "security",
    "priority": "High",
    "steps": [
      {
        "type": "action",
        "description": "Attempt login with valid email but incorrect password and valid CSRF token"
      },
      {
        "type": "assertion",
        "description": "Verify HTTP 401 error with generic message"
      },
      {
        "type": "action",
        "description": "Repeat login failure 5 times"
      },
      {
        "type": "assertion",
        "description": "After 5th failure, account is locked and further attempts return HTTP 429 or account lockout message"
      }
    ]
  },
  {
    "id": "TC007",
    "title": "Reject login with invalid or missing CSRF token",
    "description": "Verify login requests without valid CSRF token are rejected with HTTP 403 status.",
    "category": "security",
    "priority": "High",
    "steps": [
      {
        "type": "action",
        "description": "Submit login request with valid credentials but missing CSRF token"
      },
      {
        "type": "assertion",
        "description": "Check HTTP 403 forbidden response"
      },
      {
        "type": "action",
        "description": "Submit login request with invalid CSRF token"
      },
      {
        "type": "assertion",
        "description": "Check HTTP 403 forbidden response"
      }
    ]
  },
  {
    "id": "TC008",
    "title": "Password recovery request sends secure reset link with expiration",
    "description": "Verify the password recovery flow sends a reset link that expires in 15 minutes to the user's registered email.",
    "category": "functional",
    "priority": "High",
    "steps": [
      {
        "type": "action",
        "description": "Request password reset for registered email"
      },
      {
        "type": "assertion",
        "description": "Check email with reset link is sent"
      },
      {
        "type": "action",
        "description": "Use reset link within 15 minutes"
      },
      {
        "type": "action",
        "description": "Set new password conforming to security rules"
      },
      {
        "type": "assertion",
        "description": "Verify password reset is successful and user can login with new password"
      }
    ]
  },
  {
    "id": "TC009",
    "title": "Reject password reset with expired reset link",
    "description": "Verify that password reset attempts using expired reset links (after 15 minutes) are rejected with appropriate error.",
    "category": "error handling",
    "priority": "High",
    "steps": [
      {
        "type": "action",
        "description": "Attempt password reset using a reset link older than 15 minutes"
      },
      {
        "type": "assertion",
        "description": "Check rejection with error indicating link expiration"
      },
      {
        "type": "action",
        "description": "Ensure no password change occurs"
      }
    ]
  },
  {
    "id": "TC010",
    "title": "Email verification blocks access before confirmation",
    "description": "Verify users cannot access platform features before verifying their email via confirmation link that expires after 24 hours.",
    "category": "security",
    "priority": "High",
    "steps": [
      {
        "type": "action",
        "description": "Register new user"
      },
      {
        "type": "assertion",
        "description": "Verify email verification link is sent with 24-hour expiry"
      },
      {
        "type": "action",
        "description": "Attempt login before email verification"
      },
      {
        "type": "assertion",
        "description": "Verify login succeeds but access to platform features is blocked"
      },
      {
        "type": "action",
        "description": "Verify user clicks verification link within 24 hours"
      },
      {
        "type": "assertion",
        "description": "Confirm email verification is successful and user gains full access"
      },
      {
        "type": "action",
        "description": "Attempt email verification after 24 hours expiry"
      },
      {
        "type": "assertion",
        "description": "Verify verification link is rejected and user cannot verify"
      }
    ]
  },
  {
    "id": "TC011",
    "title": "Session management with secure HttpOnly cookies and CSRF tokens",
    "description": "Verify sessions created on login use secure HttpOnly cookies and CSRF tokens are required for subsequent state-changing API calls.",
    "category": "security",
    "priority": "High",
    "steps": [
      {
        "type": "action",
        "description": "Login user successfully"
      },
      {
        "type": "assertion",
        "description": "Verify session cookie is HttpOnly, Secure, and SameSite"
      },
      {
        "type": "action",
        "description": "Make authenticated API call with valid CSRF token"
      },
      {
        "type": "assertion",
        "description": "Verify API call succeeds"
      },
      {
        "type": "action",
        "description": "Make authenticated API call without or with invalid CSRF token"
      },
      {
        "type": "assertion",
        "description": "Verify rejection with HTTP 403"
      }
    ]
  },
  {
    "id": "TC012",
    "title": "API rate limiting enforced on login and registration endpoints",
    "description": "Verify that the system enforces rate limits on login and registration APIs to protect against brute force and abuse.",
    "category": "security",
    "priority": "High",
    "steps": [
      {
        "type": "action",
        "description": "Rapidly perform more than allowed login attempts from same user/IP"
      },
      {
        "type": "assertion",
        "description": "Verify server responds with HTTP 429 Too Many Requests"
      },
      {
        "type": "action",
        "description": "Rapidly submit multiple registration attempts from same user/IP"
      },
      {
        "type": "assertion",
        "description": "Verify server responds with HTTP 429 Too Many Requests"
      }
    ]
  },
  {
    "id": "TC013",
    "title": "Reject SQL injection attempts in input fields",
    "description": "Verify that inputs such as email, name, and IDs are sanitized and protected against classic SQL injection payloads.",
    "category": "security",
    "priority": "High",
    "steps": [
      {
        "type": "action",
        "description": "Submit registration or login request with common SQL injection strings in input fields"
      },
      {
        "type": "assertion",
        "description": "Verify request is safely rejected or sanitized without any database errors or unauthorized data access"
      }
    ]
  },
  {
    "id": "TC014",
    "title": "User password stored using secure hashing algorithms",
    "description": "Verify that passwords are hashed using bcrypt or Argon2 with appropriate salting and never stored or transmitted in plain text.",
    "category": "security",
    "priority": "High",
    "steps": [
      {
        "type": "action",
        "description": "Register new user with known password"
      },
      {
        "type": "assertion",
        "description": "Verify backend database stores hashed password, not plain text"
      },
      {
        "type": "assertion",
        "description": "Verify hashing algorithm used is bcrypt or Argon2 and salt is applied"
      }
    ]
  },
  {
    "id": "TC015",
    "title": "User gets generic error messages on login failures without sensitive details",
    "description": "Verify that error messages for login failure do not disclose whether email exists or which part was wrong to prevent information leakage.",
    "category": "security",
    "priority": "Medium",
    "steps": [
      {
        "type": "action",
        "description": "Attempt login with invalid email"
      },
      {
        "type": "assertion",
        "description": "Verify generic authentication failure message is returned"
      },
      {
        "type": "action",
        "description": "Attempt login with correct email and wrong password"
      },
      {
        "type": "assertion",
        "description": "Verify same generic error message is returned"
      }
    ]
  },
  {
    "id": "TC016",
    "title": "File serving endpoint restricts access to authenticated users",
    "description": "Verify that the API to serve avatars and documents returns file content only for authenticated users and returns proper error otherwise.",
    "category": "security",
    "priority": "High",
    "steps": [
      {
        "type": "action",
        "description": "Request avatar or document file URL without authentication"
      },
      {
        "type": "assertion",
        "description": "Verify HTTP 403 Access Denied response"
      },
      {
        "type": "action",
        "description": "Request existing file with authentication"
      },
      {
        "type": "assertion",
        "description": "Verify HTTP 200 with correct file content"
      },
      {
        "type": "action",
        "description": "Request non-existing file with authentication"
      },
      {
        "type": "assertion",
        "description": "Verify HTTP 404 Not Found response"
      }
    ]
  },
  {
    "id": "TC017",
    "title": "Multi-step registration step validation",
    "description": "Verify that each registration step can be validated independently with detailed feedback to allow stepwise completion of the form.",
    "category": "functional",
    "priority": "Medium",
    "steps": [
      {
        "type": "action",
        "description": "Submit step 1 data (e.g., personal info) for validation via validation API"
      },
      {
        "type": "assertion",
        "description": "Check no validation errors for valid data"
      },
      {
        "type": "action",
        "description": "Submit step 2 data (e.g., file uploads) with invalid inputs"
      },
      {
        "type": "assertion",
        "description": "Check detailed validation error messages returned"
      },
      {
        "type": "action",
        "description": "Correct errors and validate again"
      },
      {
        "type": "assertion",
        "description": "Step validation passes"
      }
    ]
  },
  {
    "id": "TC018",
    "title": "System maintains response times under 500ms during normal usage",
    "description": "Verify that API endpoints for login, registration, and user info retrieval respond within 500 milliseconds under normal load conditions.",
    "category": "performance",
    "priority": "Medium",
    "steps": [
      {
        "type": "action",
        "description": "Perform multiple login, registration, and user info API calls under normal load"
      },
      {
        "type": "assertion",
        "description": "Measure and confirm response times are consistently below 500ms"
      }
    ]
  },
  {
    "id": "TC019",
    "title": "Role-based access enforcement for API actions",
    "description": "Verify that student, teacher, and admin users have distinct permissions enforced by the system, e.g., only admin can create teachers and disable accounts.",
    "category": "security",
    "priority": "High",
    "steps": [
      {
        "type": "action",
        "description": "Attempt teacher account creation using student or teacher role credentials via API"
      },
      {
        "type": "assertion",
        "description": "Operation is rejected with proper unauthorized error"
      },
      {
        "type": "action",
        "description": "Login as admin and create/disable user accounts"
      },
      {
        "type": "assertion",
        "description": "Operations succeed only with admin credentials"
      },
      {
        "type": "action",
        "description": "Attempt user access to admin-only features"
      },
      {
        "type": "assertion",
        "description": "Access denied with proper error"
      }
    ]
  }
]
